<div class="main-content">
    <div class="breadcrumbs" id="breadcrumbs">
        <script type="text/javascript">
            try{ace.settings.check('breadcrumbs' , 'fixed')}catch(e){}
            
            //删除确认框
            function delFun(id){
            	var flag = confirm("确认删除该记录？")
            	if (flag == true){
            		window.location.href="${www}/areainfo/delete?id=" + id;
            	}   
            }
            
            function firstCodeFun(code){
             	var vcName = document.getElementById("vcName");
            	window.location.href="${www}/areainfo?firstCode=" + code + "&vcName=" + vcName.value;
            }
            
            function secondCodeFun(code){
            	var vcName = document.getElementById("vcName");
                var firstCode = document.getElementById("firstCode");
            	window.location.href="${www}/areainfo?secondCode=" + code + "&firstCode=" + firstCode.value
            							+ "&vcName=" + vcName.value;
            }
            
            function thirdCodeFun(code){
            	var vcName = document.getElementById("vcName");
            	var firstCode = document.getElementById("firstCode");
            	var secondCode = document.getElementById("secondCode");
            	window.location.href="${www}/areainfo?thirdCode=" + code + "&secondCode=" + secondCode.value + 
            	                          "&firstCode=" + firstCode.value + "&vcName=" + vcName.value;
            }
            
        </script>

        <ul class="breadcrumb">
            <li>
                <i class="icon-home home-icon"></i>
                <a href="${www}/main">主页</a>
            </li>

            <li>
                <a href="${www}/areainfo">地区信息列表</a>
            </li>
        </ul><!-- .breadcrumb -->

        <div class="nav-search" id="nav-search">
            <form class="form-search">
						<span class="input-icon">
							<input type="text" placeholder="Search ..." class="nav-search-input" id="nav-search-input" autocomplete="off" />
							<i class="icon-search nav-search-icon"></i>
						</span>
            </form>
        </div><!-- #nav-search -->
    </div>

    <div class="page-content">

        <div class="page-header">
            <h1>地区信息列表</h1>
        </div>
        
         #if(${msg})
	     <div>
		     #if(${success})
	    		<li class="text-success">$!{msg}</li>
			 #else
	    		<li class="text-danger">$!{msg}</li>
			 #end    	
		 </div>
	    #end
        
        <div class="container-fluid">
            <div class="dataTables_wrapper">
                <div class="row">
                    <div class="col-sm-10">
                        <form class="form-inline" role="form">
                            <div class="form-group">
		                        <label>选择省份：</label>
		                        <select name="firstCode" onchange="firstCodeFun(this.options[this.options.selectedIndex].value)">
                                    <option value="" >全部</option>
                                    #foreach($firstLeve in $firstLevelList)
                                    	<option value="$!{firstLeve.vcCode}" #if($firstLeve.vcCode == $!{firstCode})
                                    		 selected #end>$!{firstLeve.vcName}</option>
                                    #end
		                        </select>
                            </div>
                            <div class="form-group">
                            	 <label>选择省辖市：</label>
		                         <select name="secondCode" onchange="secondCodeFun(this.options[this.options.selectedIndex].value)">
                                    <option value="" >全部</option>
                                    #foreach($secondLeve in $secondLevelList)
                                    	<option value="$!{secondLeve.vcCode}" #if($secondLeve.vcCode == $!{secondCode})
                                    		 selected #end>$!{secondLeve.vcName}</option>
                                    #end
		                         </select>
                            </div>
                            <div class="form-group">
                            	 <label>选择区县：</label>
		                        <select name="thirdCode" onchange="thirdCodeFun(this.options[this.options.selectedIndex].value)">
                                    <option value="" >全部</option>
                                    #foreach($thirdLeve in $thirdLevelList)
                                    	<option value="$!{thirdLeve.vcCode}" #if($thirdLeve.vcCode == $!{thirdCode})
                                    		 selected #end>$!{thirdLeve.vcName}</option>
                                    #end
		                        </select>
                            </div>
                            <div class="form-group">
                               <label>地区名称：</label>
                               <input type="text" name="vcName" value="$!{vcName}">
                            </div>
                            <div class="form-group">
                                <button class="btn btn-xs btn-primary" type="submit">查询</button>
                            </div>
                        </form>
                    </div>
                    <div class="col-sm-2 text-right">
                        <a href="${www}/areainfo/new?vcParentCode=0" class="btn btn-success btn-xs">添加顶级地区</a>
                    </div>
                </div>
                
                <input type="hidden" name="firstCode" id="firstCode" value="$!{firstCode}"/>
            	<input type="hidden" name="secondCode" id="secondCode" value="$!{secondCode}"/>
            	<input type="hidden" name="thirdCode" id="thirdCode" value="$!{thirdCode}"/>
            	<input type="hidden" name="vcName" id="vcName" value="$!{vcName}"/>
                <table class="table table-striped table-bordered table-hover dataTable">
                    <thead>
                    <tr>
                        <th>代码</th>
                        <th>名称</th>
                        <th>是否有效</th>
                        <th>操作</th>
                    </tr>
                    </thead>
                    <tbody>
                        #foreach($row in $result.rows)
                        <tr>
                        	<td> ${row.vcCode} </td>
                            <td>
                            	<a href="${www}/areainfo/detail?id=${row.id}">${row.vcName}</a>       
                            </td>
                            <td> 
                            	#if($row.ivalid ==1)
                            		 有效 
                            	#elseif($row.ivalid ==2) 
                            		无效
                                #end
                            </td>
                            <td>
                            	 <a href="${www}/areainfo/edit?id=${row.id}">修改</a>   
                            	 #if($row.vcCode.length() == 6)
                            	 	 ｜ <a href="${www}/areainfo/new?vcParentCode=${row.vcCode}">添加下级地区</a>
                            	 #end
                            </td>
                        </tr>
                        #end
                    </tbody></table>
                <div class="row">
                    <div class="col-sm-12">
                        <div class="dataTables_paginate paging_bootstrap">
                            <ul class="pagination">
                                #set($pageRequestURL="${www}/areainfo?pageIndex=[PAGINATION_PAGE_INDEX]#if($!{result.queryParameters})&$!{result.queryParameters}#end")
                                #paginationHelper($result $pageRequestURL)
                            </ul>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div><!-- /.page-content -->
</div><!-- /.main-content -->


