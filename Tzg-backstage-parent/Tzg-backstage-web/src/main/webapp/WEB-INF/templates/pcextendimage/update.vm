<div class="main-content">
    <div class="breadcrumbs" id="breadcrumbs">
        <script type="text/javascript">
            try{ace.settings.check('breadcrumbs' , 'fixed')}catch(e){}
            
            
            function tijiao(){
            	var vcName = document.getElementById("vcName");
            	var vcUrl = document.getElementById("vcUrl");
            	var vcImageUrl = document.getElementById("vcImageUrl");
            	var iextendPlace = document.getElementById("iextendPlace");
            	if(vcName.value == ""){
            		alert("别名不能为空");
            		vcName.focus();
            		return false;
            	}
            	if(vcName.value.length>10){
            		alert("别名过长，请重新维护");
            		vcName.focus();
            		return false;
            	}
            	if(vcUrl.value == "" && iextendPlace.value != 2){
            		alert("链接不能为空");
            		vcUrl.focus();
            		return false;
            	}
            	if(vcImageUrl.value == ""){
            		alert("请上传图片");
            		vcImageUrl.focus();
            		return false;
            	}
            	
            	var pcExtendImageForm = document.getElementById("pcExtendImageForm");
				pcExtendImageForm.submit();
            }
            
            function f_changeExtendPlace(){
            	var iextendPlace = document.getElementById("iextendPlace");
            	$("#vcUrl").val("");
            	if(iextendPlace.value==2){
            		$("#isDiv").attr("hidden",false);
            		$("#vcUrl").attr("readonly",true);
            	}
            	if(iextendPlace.value==1){
            		$("#isDiv").attr("hidden",true);
            		$("#vcUrl").attr("readonly",false);
            	}
            }
            
            function f_isChecked(){
            	if(isChecked.checked){
            		$("#vcUrl").attr("readonly",false);
            	}else{
            		$("#vcUrl").attr("readonly",true);
            	}
            }
        </script>

        <ul class="breadcrumb">
            <li>
                <i class="icon-home home-icon"></i>
                <a href="${www}/main">主页</a>
            </li>

            <li>
                <a href="${www}/pcextendimage">SEO推荐管理</a>
            </li>
            <li class="active">编辑SEO推荐推广</li>
        </ul><!-- .breadcrumb -->

        <div class="nav-search" id="nav-search">
            <form class="form-search">
						<span class="input-icon">
							<input type="text" placeholder="Search ..." class="nav-search-input" id="nav-search-input" autocomplete="off" />
							<i class="icon-search nav-search-icon"></i>
						</span>
            </form>
        </div><!-- #nav-search -->
    </div>

    <div class="page-content">

        <div class="page-header">
            <h1>编辑SEO推荐推广</h1>
        </div>
        <form action="${www}/pcextendimage/update?id=$!{param.id}" method="post" class="form-horizontal" id="pcExtendImageForm">
            <div class="row">
                <div class="col-xs-12 col-md-8">
                    <div class="form-group">
                        <label class="col-md-2 col-sm-2 control-label">推荐位：</label>
                        <div class="col-md-10 col-sm-8">
                            <select  name="iextendPlace" id="iextendPlace" class="col-sm-8" onChange="f_changeExtendPlace()">
                            	<option value="1" #if($param.iextendPlace && $param.iextendPlace =='1') selected #end>首页推荐位</option>
                         		<option value="2" #if($param.iextendPlace && $param.iextendPlace =='2') selected #end>注册页宣传位</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-md-2 col-sm-2 control-label">别名：</label>
                        <div class="col-md-10 col-sm-8">
                            <input type="text" class="col-sm-8" name="vcName" id="vcName" value="$!{param.vcName}"/>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-md-2 col-sm-2 control-label">链接：</label>
                        <div class="col-md-10 col-sm-8">
                       		<div class="row">
                            	<div class="col-md-8">
			                        <input type="text" class="col-sm-12" name="vcUrl" value="$!{param.vcUrl}" id="vcUrl"/>
			                   	</div>
                            	<div class="col-md-4" hidden id="isDiv">
			                       <input type="checkbox" id="isChecked" onChecked onclick="f_isChecked()">允许添加链接
			                   	</div>
			            	</div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-md-2 col-sm-2 control-label">图片：</label>
                        <div class="col-md-10 col-sm-8">
                            <div class="row">
		                        <div class="col-md-8">
		                        	<input type="text" class="col-sm-12" id="vcImageUrl" value="$!{param.vcImageUrl}" name="vcImageUrl" readonly/>
		                        </div>
		                        <div class="col-md-4">
		                        	<button type="button" id="select_focus_path_btn" class="btn btn-xs">选择链接地址</button>
		                        </div>
		                    </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-md-2 col-sm-2 control-label">状态：</label>
                        <div class="col-md-10 col-sm-8">
                            <input id="u10_input" type="radio"  name="istate" value="1" #if($param.istate==1) checked #end checked>有效
                            	&nbsp;&nbsp;
                            <input id="u10_input" type="radio"  name="istate" value="2" #if($param.istate==2) checked #end>无效
                           	 	&nbsp;&nbsp;
                        </div>
                    </div>
                 </div>
            </div>
            <div class="clearfix form-actions">
                <div class="col-sm-offset-2 col-md-9">
                    <button class="btn btn-info" type="button" onclick="tijiao()">
                        <i class="icon-ok bigger-110"></i>提交
                    </button>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		            <button class="btn btn-info" type="button" onclick="javascript:history.go(-1);">
		                <i class="icon-arrow-left bigger-110"></i>返回
		            </button>
                </div>
            </div>
    </div>
</div>

<script src="${www}/js/sea.js" id="seajsnode"></script>
<script type="text/javascript">
seajs.use(['dialog'], function(dialog) {
    var vcUrl = $("#vcImageUrl");
    var showDialog = function () {
        dialog.alert({
            title: 'SEO推荐管理',
            content: '<iframe id="js_selector" frameborder="0" width="800" height="400" src="${www}/uploadfile/filePathList?itype=15"></iframe>',
            ok: function() {
                var checkedRadio = $(":radio:checked", document.getElementById("js_selector").contentDocument);
                if (checkedRadio.size()) {
                    vcUrl.val(checkedRadio.val());
                }
            }
        });
    };
    $("#select_focus_path_btn").click(showDialog);
});

(function(){
    $(".tag-type").change(function(){
        var type = $(".tag-type  option:selected").text();

        $.post("${www}/focus/getChannel",{plat:type},function(data){
            $(".vc-type").empty();
			$(".vc-type").append('<option value="">请选择渠道</option>');
            for(var i=0;i<data.list.length;i++){
			var row = data.list[i];
                $(".vc-type").append("<option value='"+ row.vcCode +"'>"+ row.vcCode +"</option>");
            }
        });

    })
})();
</script>